<!DOCTYPE html>
{% load custom_filters %} 
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Manage Projects</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    function showSection(sectionId) {
      document.querySelectorAll('.section').forEach(s => s.classList.add('hidden'));
      document.getElementById(sectionId).classList.remove('hidden');
    }
  </script>
</head>

<body class="flex h-screen bg-gray-100 font-sans">


  <!-- Sidebar -->
  <aside class="w-64 bg-gray-900 text-white flex flex-col">

    <div class="p-6 text-2xl font-bold text-center border-b border-gray-700">
       Manage projects
    </div>
      <!-- User Profile + Dropdown -->
    <div class="relative px-6 py-4 border-b border-gray-700">
      <!-- Toggle Button -->
      <button onclick="toggleUserDropdown()" class="w-full flex items-center space-x-3 focus:outline-none">
        <img src="https://cdn-icons-png.flaticon.com/512/149/149071.png" alt="User" class="w-8 h-8 rounded-full border border-gray-500" />
        <span>{{ user.username }}</span>
        <!-- Dropdown arrow icon -->
        <svg class="w-4 h-4 ml-auto" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
        </svg>
      </button>
      <!-- Dropdown Menu -->
      <div id="userDropdown" class="hidden absolute left-6 mt-2 w-48 bg-white text-gray-800 rounded shadow-lg z-50">
        <form action="{% url 'logout' %}" method="post" class="block w-full">
          {% csrf_token %}
          <button type="submit" class="w-full text-left px-4 py-2 hover:bg-gray-100">
            Logout
          </button>
        </form>
      </div>
    </div>

    <nav class="flex-1 p-4 space-y-2">
      <button data-section="newproject" onclick="showSection('new_prj')" class="nav-button w-full text-left px-4 py-2 bg-gray-800 hover:bg-gray-700 rounded"> New Project</button>
      <button data-section="existingproject" onclick="showSection('existing_prj')" class="nav-button w-full text-left px-4 py-2 bg-gray-800 hover:bg-gray-700 rounded">Existing Projects</button>


    </nav>
    <div class="p-4 border-t border-gray-700 text-sm text-gray-400 text-center">
       XP Simulation &copy; 2025
    </div>
    
  </aside>

  <!-- Main Content -->
  <main class="flex-1 p-10 overflow-y-auto">
    
    <!-- Permissions Section -->
    <form method="POST" action="{% url 'simulate_project' request.user.id %}">
      {% csrf_token %}
      <section id="new_prj" class="section">
        <h2 class="text-2xl font-bold mb-4 text-gray-700">Create Project</h2>
        <div class="bg-white p-6 rounded-xl shadow mt-6">

          <!-- Project Name -->
          <label for="project_name" class="block text-sm font-medium text-gray-700 mb-2">Project Name</label>
          <input type="text" id="project_name" name="project_name" required
                placeholder="Enter your project name"
                class="w-full mb-6 px-4 py-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500">

          <!-- Hidden fields to submit selected category & net type -->
          <input type="hidden" id="category_type" name="category_type">
          <input type="hidden" id="net_type" name="net_type">

          <label class="block text-sm font-medium text-gray-700 mb-2">Select Network Type</label>
          <div class="space-y-4">

            <!-- Sample Category: Design -->
            <div class="border rounded-lg p-4 bg-gray-100">
              <div class="flex justify-between items-center">
                <span class="font-semibold text-gray-800">Design</span>
                <button type="button" onclick="toggleAccordion('design-types')"
                        class="bg-gray-900 text-white px-3 py-1 rounded hover:bg-gray-700">
                  Show Types
                </button>
              </div>
              <div id="design-types" class="hidden mt-3 space-y-2">
                <div class="flex gap-2">
                  <button type="button" onclick="selectSimType('Design', '1D')" class="sim-btn px-3 py-1 bg-white border rounded hover:bg-blue-100">1D</button>
                  <button type="button" onclick="selectSimType('Design', '2D')" class="sim-btn px-3 py-1 bg-white border rounded hover:bg-blue-100">2D</button>
                  <button type="button" onclick="selectSimType('Design', '3D')" class="sim-btn px-3 py-1 bg-white border rounded hover:bg-blue-100">3D</button>
                </div>
                <button type="submit" class="mt-2 bg-indigo-600 text-white px-4 py-1 rounded hover:bg-indigo-700">
                  Simulate
                </button>
              </div>
            </div>

            <!-- Repeat similar blocks for Controllers, Lifing, Performance, Prognostics -->
             <div class="border rounded-lg p-4 bg-gray-100">
              <div class="flex justify-between items-center">
                <span class="font-semibold text-gray-800">Lifing</span>
                <button type="button" onclick="toggleAccordion('lifing-types')"
                        class="bg-gray-900 text-white px-3 py-1 rounded hover:bg-gray-700">
                  Show Types
                </button>
              </div>
              <div id="lifing-types" class="hidden mt-3 space-y-2">
                <div class="flex gap-2">
                  <button type="button" onclick="selectSimType('lifing', '1D')" class="sim-btn px-3 py-1 bg-white border rounded hover:bg-blue-100">1D</button>
                  <button type="button" onclick="selectSimType('lifing', '2D')" class="sim-btn px-3 py-1 bg-white border rounded hover:bg-blue-100">2D</button>
                  <button type="button" onclick="selectSimType('lifing', '3D')" class="sim-btn px-3 py-1 bg-white border rounded hover:bg-blue-100">3D</button>
                </div>
                <button type="submit" class="mt-2 bg-indigo-600 text-white px-4 py-1 rounded hover:bg-indigo-700">
                  Simulate
                </button>
              </div>
            </div>

            <div class="border rounded-lg p-4 bg-gray-100">
              <div class="flex justify-between items-center">
                <span class="font-semibold text-gray-800">Perfomance</span>
                <button type="button" onclick="toggleAccordion('perfomance-types')"
                        class="bg-gray-900 text-white px-3 py-1 rounded hover:bg-gray-700">
                  Show Types
                </button>
              </div>
              <div id="perfomance-types" class="hidden mt-3 space-y-2">
                <div class="flex gap-2">
                  <button type="button" onclick="selectSimType('perfomance', '1D')" class="sim-btn px-3 py-1 bg-white border rounded hover:bg-blue-100">1D</button>
                  <button type="button" onclick="selectSimType('perfomance', '2D')" class="sim-btn px-3 py-1 bg-white border rounded hover:bg-blue-100">2D</button>
                  <button type="button" onclick="selectSimType('perfomance', '3D')" class="sim-btn px-3 py-1 bg-white border rounded hover:bg-blue-100">3D</button>
                </div>
                <button type="submit" class="mt-2 bg-indigo-600 text-white px-4 py-1 rounded hover:bg-indigo-700">
                  Simulate
                </button>
              </div>
            </div>


            <div class="border rounded-lg p-4 bg-gray-100">
              <div class="flex justify-between items-center">
                <span class="font-semibold text-gray-800">Prognostics</span>
                <button type="button" onclick="toggleAccordion('prognostics-types')"
                        class="bg-gray-900 text-white px-3 py-1 rounded hover:bg-gray-700">
                  Show Types
                </button>
              </div>
              <div id="prognostics-types" class="hidden mt-3 space-y-2">
                <div class="flex gap-2">
                  <button type="button" onclick="selectSimType('prognostics', '1D')" class="sim-btn px-3 py-1 bg-white border rounded hover:bg-blue-100">1D</button>
                  <button type="button" onclick="selectSimType('prognostics', '2D')" class="sim-btn px-3 py-1 bg-white border rounded hover:bg-blue-100">2D</button>
                  <button type="button" onclick="selectSimType('prognostics', '3D')" class="sim-btn px-3 py-1 bg-white border rounded hover:bg-blue-100">3D</button>
                </div>
                <button type="submit" class="mt-2 bg-indigo-600 text-white px-4 py-1 rounded hover:bg-indigo-700">
                  Simulate
                </button>
              </div>
            </div>

            <div class="border rounded-lg p-4 bg-gray-100">
              <div class="flex justify-between items-center">
                <span class="font-semibold text-gray-800">Controllers</span>
                <button type="button" onclick="toggleAccordion('controllers-types')"
                        class="bg-gray-900 text-white px-3 py-1 rounded hover:bg-gray-700">
                  Show Types
                </button>
              </div>
              <div id="controllers-types" class="hidden mt-3 space-y-2">
                <div class="flex gap-2">
                  <button type="button" onclick="selectSimType('controllers', '1D')" class="sim-btn px-3 py-1 bg-white border rounded hover:bg-blue-100">1D</button>
                  <button type="button" onclick="selectSimType('controllers', '2D')" class="sim-btn px-3 py-1 bg-white border rounded hover:bg-blue-100">2D</button>
                  <button type="button" onclick="selectSimType('controllers', '3D')" class="sim-btn px-3 py-1 bg-white border rounded hover:bg-blue-100">3D</button>
                </div>
                <button type="submit" class="mt-2 bg-indigo-600 text-white px-4 py-1 rounded hover:bg-indigo-700">
                  Simulate
                </button>
              </div>
            </div>




          </div>
        </div>
      </section>
    </form>

          
    <form method="POST" action="{% url 'simulate_existing_project' request.user.id %}">
      {% csrf_token %}
      <section id="existing_prj" class="section hidden">
        <h2 class="text-2xl font-bold mb-4 text-gray-700">Manage Project</h2>
        <div class="bg-white p-6 rounded-xl shadow mt-6">

          <!-- Project Name -->
          <label for="projectSelect1" class="block text-sm font-medium text-gray-700 mb-2">Project Name</label>
          <select id="projectSelect" name="projectSelect"  class="border p-2 rounded w-full bg-gray-50 text-gray-800" >
            <option value="">-- Select a project --</option>
            {% for project in user_projects %}
              <option value="{{ project.id }}" 
                      data-category="{{ project.category_type1 }}" 
                      data-nettype="{{ project.net_type1 }}">
                {{ project.project_name }}
              </option>
            {% empty %}
              <option disabled>No projects found</option>
            {% endfor %}
          </select>

          <!-- Hidden inputs to store selected values -->
          <input type="hidden" id="category_type1" name="category_type1">
          <input type="hidden" id="net_type1" name="net_type1">

          <label class="block text-sm font-medium text-gray-700 mb-2">Select Network Type</label>
          <div class="space-y-4">

            <!-- Sample Category: Design -->
            <div class="border rounded-lg p-4 bg-gray-100">
              <div class="flex justify-between items-center">
                <span class="font-semibold text-gray-800">Design</span>
                <button type="button" onclick="toggleAccordion('design-types1')"
                        class="bg-gray-900 text-white px-3 py-1 rounded hover:bg-gray-700">
                  Show Types
                </button>
              </div>
              <div id="design-types1" class="hidden mt-3 space-y-2">
                <div class="flex gap-2">
                  <button type="button" onclick="selectSimType1('Design', '1D')" class="sim-btn1 px-3 py-1 bg-white border rounded hover:bg-blue-100">1D</button>
                  <button type="button" onclick="selectSimType1('Design', '2D')" class="sim-btn1 px-3 py-1 bg-white border rounded hover:bg-blue-100">2D</button>
                  <button type="button" onclick="selectSimType1('Design', '3D')" class="sim-btn1 px-3 py-1 bg-white border rounded hover:bg-blue-100">3D</button>
                </div>
                <button type="submit" class="mt-2 bg-indigo-600 text-white px-4 py-1 rounded hover:bg-indigo-700">
                  Simulate
                </button>
              </div>
            </div>

            <!-- Repeat similar blocks for Controllers, Lifing, Performance, Prognostics -->
            <div class="border rounded-lg p-4 bg-gray-100">
              <div class="flex justify-between items-center">
                <span class="font-semibold text-gray-800">Lifing</span>
                <button type="button" onclick="toggleAccordion('lifing-types1')"
                        class="bg-gray-900 text-white px-3 py-1 rounded hover:bg-gray-700">
                  Show Types
                </button>
              </div>
              <div id="lifing-types1" class="hidden mt-3 space-y-2">
                <div class="flex gap-2">
                  <button type="button" onclick="selectSimType1('lifing1', '1D')" class="sim-btn1 px-3 py-1 bg-white border rounded hover:bg-blue-100">1D</button>
                  <button type="button" onclick="selectSimType1('lifing1', '2D')" class="sim-btn1 px-3 py-1 bg-white border rounded hover:bg-blue-100">2D</button>
                  <button type="button" onclick="selectSimType1('lifing1', '3D')" class="sim-btn1 px-3 py-1 bg-white border rounded hover:bg-blue-100">3D</button>
                </div>
                <button type="submit" class="mt-2 bg-indigo-600 text-white px-4 py-1 rounded hover:bg-indigo-700">
                  Simulate
                </button>
              </div>
            </div>

            <div class="border rounded-lg p-4 bg-gray-100">
              <div class="flex justify-between items-center">
                <span class="font-semibold text-gray-800">Perfomance</span>
                <button type="button" onclick="toggleAccordion('perfomance-types1')"
                        class="bg-gray-900 text-white px-3 py-1 rounded hover:bg-gray-700">
                  Show Types
                </button>
              </div>
              <div id="perfomance-types1" class="hidden mt-3 space-y-2">
                <div class="flex gap-2">
                  <button type="button" onclick="selectSimType1('perfomance1', '1D')" class="sim-btn1 px-3 py-1 bg-white border rounded hover:bg-blue-100">1D</button>
                  <button type="button" onclick="selectSimType1('perfomance1', '2D')" class="sim-btn1 px-3 py-1 bg-white border rounded hover:bg-blue-100">2D</button>
                  <button type="button" onclick="selectSimType1('perfomance1', '3D')" class="sim-btn1 px-3 py-1 bg-white border rounded hover:bg-blue-100">3D</button>
                </div>
                <button type="submit" class="mt-2 bg-indigo-600 text-white px-4 py-1 rounded hover:bg-indigo-700">
                  Simulate
                </button>
              </div>
            </div>


            <div class="border rounded-lg p-4 bg-gray-100">
              <div class="flex justify-between items-center">
                <span class="font-semibold text-gray-800">Prognostics</span>
                <button type="button" onclick="toggleAccordion('prognostics-types1')"
                        class="bg-gray-900 text-white px-3 py-1 rounded hover:bg-gray-700">
                  Show Types
                </button>
              </div>
              <div id="prognostics-types1" class="hidden mt-3 space-y-2">
                <div class="flex gap-2">
                  <button type="button" onclick="selectSimType1('prognostics1', '1D')" class="sim-btn1 px-3 py-1 bg-white border rounded hover:bg-blue-100">1D</button>
                  <button type="button" onclick="selectSimType1('prognostics1', '2D')" class="sim-btn1 px-3 py-1 bg-white border rounded hover:bg-blue-100">2D</button>
                  <button type="button" onclick="selectSimType1('prognostics1', '3D')" class="sim-btn1 px-3 py-1 bg-white border rounded hover:bg-blue-100">3D</button>
                </div>
                <button type="submit" class="mt-2 bg-indigo-600 text-white px-4 py-1 rounded hover:bg-indigo-700">
                  Simulate
                </button>
              </div>
            </div>

            <div class="border rounded-lg p-4 bg-gray-100">
              <div class="flex justify-between items-center">
                <span class="font-semibold text-gray-800">Controllers</span>
                <button type="button" onclick="toggleAccordion('controllers-types1')"
                        class="bg-gray-900 text-white px-3 py-1 rounded hover:bg-gray-700">
                  Show Types
                </button>
              </div>
              <div id="controllers-types1" class="hidden mt-3 space-y-2">
                <div class="flex gap-2">
                  <button type="button" onclick="selectSimType1('controllers1', '1D')" class="sim-btn1 px-3 py-1 bg-white border rounded hover:bg-blue-100">1D</button>
                  <button type="button" onclick="selectSimType1('controllers1', '2D')" class="sim-btn1 px-3 py-1 bg-white border rounded hover:bg-blue-100">2D</button>
                  <button type="button" onclick="selectSimType1('controllers1', '3D')" class="sim-btn1 px-3 py-1 bg-white border rounded hover:bg-blue-100">3D</button>
                </div>
                <button type="submit" class="mt-2 bg-indigo-600 text-white px-4 py-1 rounded hover:bg-indigo-700">
                  Simulate
                </button>
              </div>
            </div>




          </div>
        </div>
      </section>
    </form>



    

    
    

  </main>
</body>
<script>
  function toggleAccordion(id) {
    const section = document.getElementById(id);
    section.classList.toggle('hidden');
  }

  function selectSimType(category, netType) {
    document.getElementById('category_type').value = category;
    document.getElementById('net_type').value = netType;
    
    // Optional: highlight selected button
    const buttons = document.querySelectorAll('.sim-btn');
    buttons.forEach(btn => btn.classList.remove('bg-blue-200', 'ring-2'));
    event.target.classList.add('bg-blue-200', 'ring-2', 'ring-blue-500');
  }
  
  function selectSimType1(category, netType) {
    document.getElementById('category_type1').value = category;
    document.getElementById('net_type1').value = netType;
    
    // Optional: highlight selected button
    const buttons = document.querySelectorAll('.sim-btn1');
    buttons.forEach(btn => btn.classList.remove('bg-blue-200', 'ring-2'));
    event.target.classList.add('bg-blue-200', 'ring-2', 'ring-blue-500');
  }
</script>
<script>
    const networkData = {
      'Controllers': [
        { name: 'Controller_v1.sim', id: 'ctrl1' },
        { name: 'Controller_v2_final.sim', id: 'ctrl2' },
      ],
      'Design': [
        { name: 'DesignTest_A.sim', id: 'des1' },
        { name: 'AerodynamicFlow.sim', id: 'des2' },
      ],
      'Lifing': [
        { name: 'FatigueAnalysis.sim', id: 'life1' }
      ],
      'Performance': [
        { name: 'PerfTest_01.sim', id: 'perf1' },
        { name: 'LoadResponse.sim', id: 'perf2' }
      ],
      'Prognostics': [
        { name: 'FailurePrediction.sim', id: 'prog1' }
      ]
    };
  
    function showNetworks(type) {
      const list = document.getElementById('networkList');
      list.innerHTML = ''; // Clear current list
  
      const networks = networkData[type] || [];
      if (networks.length === 0) {
        list.innerHTML = '<li class="text-gray-500">No networks available.</li>';
        return;
      }
  
      networks.forEach(net => {
        const item = document.createElement('li');
        item.className = 'flex items-center justify-between bg-gray-50 p-3 rounded shadow-sm';
  
        item.innerHTML = `
          <span class="text-gray-800 font-medium">${net.name}</span>
          <a href="/simulate/load/${net.id}/" class="bg-indigo-600 text-white px-3 py-1 rounded hover:bg-indigo-700 text-sm">Simulate</a>
        `;
  
        list.appendChild(item);
      });
    }
  </script>
  


<style>
  /* Custom checkbox styling */
  .checkbox-module:checked,
  .checkbox-submodule:checked {
    accent-color: #34D399; /* Green color for the checkbox tick */
  }

  /* Optional: Color change for the label text when checkbox is checked */
  .checkbox-module:checked + span,
  .checkbox-submodule:checked + span {
    color: #34D399; /* Green color for the text */
  }

  /* Optional: Adjust background color when checkbox is checked */
  .checkbox-module:checked {
    background-color: #34D399; /* Green background */
    border-color: #34D399;    /* Green border */
  }

  .checkbox-submodule:checked {
    background-color: #34D399; /* Green background */
    border-color: #34D399;    /* Green border */
  }

  /* Optional: Change text color of submodules and modules when checked */
  .checkbox-module:checked + span,
  .checkbox-submodule:checked + span {
    color: #000; /* Green color */
  }
</style>
<style>
  .nav-button.active {
    border-left: 4px solid #3B82F6; /* Tailwind's blue-500 */
    background-color: #374151; /* Tailwind's gray-700 */
  }
</style>
<script>
  function showSection(sectionId) {
    // Toggle visible content (your existing logic)
    document.querySelectorAll('.section').forEach(section => {
      section.style.display = section.id === sectionId ? 'block' : 'none';
    });

    // Highlight the active button
    document.querySelectorAll('.nav-button').forEach(btn => {
      if (btn.getAttribute('data-section') === sectionId) {
        btn.classList.add('active');
      } else {
        btn.classList.remove('active');
      }
    });
  }
</script>
<script>
    function toggleUserDropdown() {
      const dropdown = document.getElementById('userDropdown');
      dropdown.classList.toggle('hidden');
    }
  
    // Optional: Click outside to close the dropdown
    window.addEventListener('click', function(e) {
      const dropdown = document.getElementById('userDropdown');
      if (!e.target.closest('[onclick="toggleUserDropdown()"]') && !e.target.closest('#userDropdown')) {
        dropdown.classList.add('hidden');
      }
    });
  </script>

</html>

